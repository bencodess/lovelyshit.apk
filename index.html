<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Powered by ben.dev</title>

<style>
  :root {
    --wa-green:#1446cf;
    --wa-dark:#000000;
    --bg:#000000;
    --card:#363636;
    --text:#ffffff;
  }

  html, body {
    height:100%;
    margin:0;
    padding:0;
    overflow:hidden;
    background:var(--bg);
    font-family:system-ui,Roboto,Arial;
  }

  .center {
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    box-sizing:border-box;
  }

  .box {
    width:100%;
    max-width:380px;
    background:var(--card);
    padding:25px;
    border-radius:14px;
    box-shadow:0 8px 25px rgba(0,0,0,0.12);
    text-align:center;
  }

  h2 {
    font-size:20px;
    margin:0 0 10px 0;
    color:var(--text);
    font-weight:700;
  }

  p {
    font-size:14px;
    color:#555;
    margin:0 0 15px 0;
  }

  label {
    display:block;
    text-align:left;
    font-size:14px;
    font-weight:600;
    margin-top:14px;
    margin-bottom:6px;
    color:#333;
  }

  input {
    width:100%;
    padding:12px 14px;
    border-radius:10px;
    border:1px solid #00000000;
    font-size:15px;
    box-sizing:border-box;
  }

  button {
    width:100%;
    margin-top:18px;
    background:var(--wa-green);
    color:rgb(255, 255, 255);
    border:none;
    padding:12px;
    border-radius:10px;
    font-size:16px;
    font-weight:700;
    cursor:pointer;
  }

  #result {
    display:none;
    margin-top:16px;
    padding:12px;
    background:#ff00009c;
    border:1px solid #000000;
    color:#ffffff;
    border-radius:10px;
    font-size:14px;
  }

  footer {
    margin-top:16px;
    font-size:12px;
    color:#f5f5f5;
  }

  /* small helper styles for validation messages */
  .ok {
    background: rgba(34,197,94,0.12);
    color: #22c55e;
    border: 1px solid rgba(34,197,94,0.06);
  }
  .err {
    background: rgba(255,92,124,0.08);
    color: #ff5c7c;
    border: 1px solid rgba(255,92,124,0.06);
  }
</style>
</head>

<body>
<div class="center">

  <div class="box">

    <h2>Banne eine Nummer von WhatsApp</h2>
    <p>powered by ben.dev</p>

    <label>Telefonnummer</label>
    <input id="phone" type="tel" placeholder="+49 170 1234567" autocomplete="tel">

    <label>Passwort</label>
    <input id="pw" type="password" placeholder="Passwort">

    <button id="checkBtn">Überprüfen</button>

    <div id="result" role="status" aria-live="polite"></div>

    <footer>by ben.dev</footer>
  </div>

</div>

<script>
  const btn = document.getElementById("checkBtn");
  const phone = document.getElementById("phone");
  const pw = document.getElementById("pw");
  const result = document.getElementById("result");

  const PASS = "64826482B@n";

  document.addEventListener("touchmove", e => e.preventDefault(), { passive: false });

  // Beim Tippen erlauben wir nur Ziffern, Leerzeichen, Klammern, Bindestriche und ein führendes +
  phone.addEventListener('input', () => {
    let v = phone.value || "";
    // Entferne alle Zeichen außer Ziffern und +, Klammern, Leerzeichen und Bindestrich
    v = v.replace(/[^\d+\s()-]/g, '');

    // Stelle sicher, dass nur ein führendes + existiert (wenn vorhanden, bleibt es am Anfang)
    const hasPlus = /^\+/.test(v);
    const digitsOnly = v.replace(/\+/g, '');
    // Entferne weitere +'s (falls irgendwo im String)
    const cleanedDigits = digitsOnly.replace(/[^\d\s()-]/g, '');
    phone.value = (hasPlus ? '+' : '') + cleanedDigits;
  });

  btn.onclick = () => {
    result.style.display = "block";
    result.className = ""; // reset classes

    if (!phone.value.trim() || !pw.value.trim()) {
      result.classList.add('err');
      result.textContent = "Bitte Telefonnummer und Passwort eingeben.";
      return;
    }

    // Normalisieren: entferne Leerzeichen, Klammern und Bindestriche
    const normalized = phone.value.replace(/[\s()-]/g, '');

    // Validierung: muss mit +49 beginnen und danach maximal 13 Ziffern (also +49 gefolgt von 0-13 Ziffern? -> hier: mindestens 1 Ziffer)
    // Muster: +49 gefolgt von 1 bis 13 Ziffern
    const pattern = /^\+49\d{1,13}$/;

    if (!pattern.test(normalized)) {
      result.classList.add('err');
      result.textContent = "Ungültige Nummer. Die Nummer muss mit +49 beginnen und darf bis zu 13 Ziffern nach der Landesvorwahl haben (z.B. +491701234567).";
      return;
    }

    if (pw.value === PASS) {
      result.classList.add('ok');
      result.textContent = "Gebannt! Die Nummer " + normalized + " wurde von WhatsApp gebannt.";
    } else {
      result.classList.add('err');
      result.textContent = "Falsches Passwort.";
    }
  };

  // Enter im Passwortfeld auslösen
  pw.addEventListener("keydown", (e) => { if (e.key === "Enter") btn.click(); });
</script>

</body>
</html>